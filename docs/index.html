<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yet Another Programming Language</title>
</head>

<body>
    <h1>Yet Another Programming Language</h1>
    <button onclick="run()">Run â–¶</button>
    <a href="https://github.com/xdvarpunen/yet-another-programming-language">Github link to repository</a>
    <hr>
    <textarea name="js-code" id="" cols="30" rows="10" placeholder="define x 3
sum x 1
msgbox x"></textarea>
    <h2>Example:</h2>
    <p>define x 3<br>
    sum x 1<br>
    msgbox x</p>
    <script>
        let context = {};

        function functionLibrary(functionName, parameters) {
            if (functionName == "msgbox") {
                if (Object.hasOwn(context, parameters[0])) {
                    alert(context[parameters[0]]);
                } else {
                    alert(parameters[0]);
                }
            } else if (functionName == "sum") {
                context[parameters[0]] = parseInt(context[parameters[0]]) + parseInt(parameters[1]);
            } else if (functionName == "define") {
                context[parameters[0]] = parameters[1];
            }
        }
        function interpret(sourceCode) {
            context = {};
            const rows = sourceCode.split("\n");
            rows.forEach(row => {
                const rowSplitted = row.split(" ");
                console.log(rowSplitted)
                console.log(rowSplitted[0])
                console.log(rowSplitted.slice(1, rowSplitted.length))
                functionLibrary(rowSplitted[0], rowSplitted.slice(1, rowSplitted.length));
            });
        }
        function run() {
            const sourceCode = document.querySelector('textarea').value;
            interpret(sourceCode);
        }
    </script>
</body>

</html>
